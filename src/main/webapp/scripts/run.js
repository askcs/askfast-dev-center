define(["app","localization","config"],function(e,t,n){e.run(["$rootScope","$location","Offline","Session","Store",function(e,r,i,s,o){new i,e.$on("connection",function(){arguments[1]?console.log("connection lost :["):console.log("connection restored")}),e.app=e.app||{},e.user=e.user||o("app").get("user"),e.setLanguage=function(n){e.app.language=n,e.ui=t.ui[n]},e.setLanguage(n.app.defaults.language),e.config=n.app,s.get()&&r.path("/home"),e.$on("$routeChangeStart",function(){}),e.$on("$routeChangeSuccess",function(){}),e.$on("$routeChangeError",function(){})}])});