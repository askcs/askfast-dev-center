define(["app","localization","config"],function(e,t,n){e.run(["$rootScope","$location",function(e,r){function s(){angular.forEach(i,function(t){e.subView[t]=!1})}e.app=e.app||{},e.setLanguage=function(n){e.app.language=n,e.ui=t.ui[n]},e.setLanguage(n.app.defaults.language),e.config=n.app;var i=[];angular.forEach(e.config.app.nav.subs,function(e){angular.forEach(e,function(e){i.push(e)})}),e.subView={},e.setSubView=function(t){s(),e.subView[t]=!0},e.location={},e.$on("$routeChangeStart",function(){e.location.path=r.path().substring(1),e.config.app.nav.subs[e.location.path]?e.subView[e.config.app.nav.subs[e.location.path][0]]=!0:s()}),e.$on("$routeChangeSuccess",function(){}),e.$on("$routeChangeError",function(){console.error("Error: changing routes!")})}])});